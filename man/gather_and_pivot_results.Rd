% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils__gather_and_pivot_results.R
\name{gather_and_pivot_results}
\alias{gather_and_pivot_results}
\title{Gather and Pivot Results}
\usage{
gather_and_pivot_results(companies_expected_loss)
}
\arguments{
\item{companies_expected_loss}{tibble. Company data with NPV, PD, and expected_loss by scenario}
}
\value{
tibble with pivoted company data including NPV_change_pct and Expected_loss_change_pct
}
\description{
Pivots long-format scenario data into wide format suitable for reporting.
Creates separate tables for assets (with NPV columns) and companies
(with NPV, PD, and Expected Loss columns) by scenario. Also calculates percentage
changes from baseline to shock for NPV and Expected Loss.
}
\details{
Gather and Pivot Results

Transforms scenario-based results into wide format for reporting.
Creates separate pivoted tables for assets and companies.
}
\examples{
\dontrun{
companies <- data.frame(
  company = c("A", "A"),
  scenario = c("baseline", "shock"),
  npv = c(1000, 950),
  merton_pd = c(0.1, 0.15),
  expected_loss = c(100, 120)
)
result <- gather_and_pivot_results(companies)
# Result includes NPV_change_pct = -5\% and Expected_loss_change_pct = 20\%
}
}
